# 【検証プロンプト分析レポート】

## 全体サマリー

- **総文字数**: 8,859文字
- **推定トークン数**: 2,215 tokens（文字数 ÷ 4）
- **セクション数**: 12個

---

## セクション別内訳

### 1. 冒頭警告（1-14行目）
- **文字数**: 404文字（4.6%）
- **内容**: 🚨最重要指示、禁止事項、必須事項
- **評価**: 必要（AIのバイアス防止に重要）

### 2. ステップ1タイトル（15-22行目）
- **文字数**: 263文字（3.0%）
- **内容**: セクションタイトルと注意書き
- **評価**: 必要

### 3. 発行者の説明（25-62行目）
- **文字数**: 1,482文字（16.7%）
- **内容**: 店名の読み取り方、ブランド名のみの説明、正誤例
- **評価**: **やや冗長**（例が多すぎる）

### 4. 日付の説明（64-72行目）
- **文字数**: 233文字（2.6%）
- **内容**: 日付の読み取り方、和暦の変換
- **評価**: 適切

### 5. 総合計の説明（74-101行目）
- **文字数**: 1,029文字（11.6%）
- **内容**: ¥記号の識別方法、誤読パターン、識別手順
- **評価**: **やや冗長**（例が多い、繰り返しあり）

### 6. 税区分別の説明（103-121行目）
- **文字数**: 687文字（7.8%）
- **内容**: 外税表記の解釈、各項目の読み取り方
- **評価**: 適切

### 7. 登録番号の説明（123-129行目）
- **文字数**: 135文字（1.5%）
- **内容**: T番号の確認
- **評価**: 適切

### 8. yourReading記録フォーマット（131-147行目）
- **文字数**: 452文字（5.1%）
- **内容**: JSON形式の記入例、再確認
- **評価**: 必要

### 9. ステップ2: 既存結果との比較（149-176行目）
- **文字数**: 681文字（7.7%）
- **内容**: 既存データの提示、比較方法
- **評価**: 必要

### 10. ステップ3: 差異判定と誤読パターン（178-193行目）
- **文字数**: 490文字（5.5%）
- **内容**: 判定方法、よくある誤読パターン6種
- **評価**: 適切

### 11. 出力形式（195-268行目）
- **文字数**: 2,156文字（24.3%）
- **内容**: JSON形式の完全な例
- **評価**: **非常に冗長**（最大の削減候補）

### 12. 最終チェックリストと注意事項（270-286行目）
- **文字数**: 847文字（9.6%）
- **内容**: チェックリスト7項目、注意事項4項目
- **評価**: **やや冗長**（重複が多い）

---

## 問題点

### 1. 重複している説明

#### 画像から読み取る vs 既存結果からコピーしない
- 冒頭（6, 7, 8, 11, 12, 13行目）
- ステップ1導入（19行目）
- yourReading記録後（146-147行目）
- 発行者説明（61-62行目）
- 最終チェックリスト（273-278行目）
- 注意事項（282-283行目）

→ **合計6回繰り返し** 約500文字の重複

#### JSON形式の説明
- yourReading記録フォーマット（133-144行目）
- 出力形式セクション（201-268行目）

→ **2回提示** 約450文字の重複

### 2. 冗長な表現

#### 発行者セクション（1,482文字）
- 正しい例：4つ（41-44行目）
- 間違った例：3つ（47-49行目）
- comparison での比較説明（54-58行目）

→ **例が多すぎる**。2-3個で十分。約400文字削減可能

#### 総合計セクション（1,029文字）
- ¥記号の説明が3回繰り返し（78-80, 83-85, 89-91行目）
- 確認方法が詳細すぎる（93-97行目）

→ **繰り返しと詳細化**。約300文字削減可能

#### 出力形式セクション（2,156文字）
- 完全なJSON例示（201-268行目）
- comparison で5項目すべてを例示

→ **最大の冗長箇所**。1-2項目の例示で十分。約1,200文字削減可能

### 3. 不要と思われるセクション

#### チェックリスト（270-279行目）
- 7項目すべてが既に本文で説明済み
- 「画像から読み取る」の繰り返し確認

→ **全削除可能**。約230文字削減

---

## 削減案

### 即座に削減可能（精度に影響なし）

| 項目 | 削減文字数 | 理由 |
|------|-----------|------|
| 「画像から読み取る」の重複削除 | 300文字 | 冒頭で1回、ステップ1で1回で十分 |
| 発行者の正誤例を半減 | 400文字 | 2-3例で理解可能 |
| ¥記号説明の繰り返し削除 | 200文字 | 1回の説明で十分 |
| 最終チェックリストを削除 | 230文字 | 本文で説明済み |
| 注意事項の重複削除 | 150文字 | 既に冒頭で説明 |
| **小計** | **1,280文字** | **14.5%削減** |

### 慎重に削減可能（要検証）

| 項目 | 削減文字数 | 理由 |
|------|-----------|------|
| JSON出力形式を簡略化 | 1,200文字 | 全項目例示は不要、1-2項目で十分 |
| yourReading記録フォーマット削除 | 450文字 | 出力形式で説明するため重複 |
| 総合計セクションの詳細削減 | 300文字 | 要点のみに絞る |
| **小計** | **1,950文字** | **22.0%削減** |

### 削減後の推定

- **即座削減のみ**: 8,859 → 7,579文字（**14.5%削減**）
  - 推定トークン数: 2,215 → 1,895 tokens（320 tokens削減）

- **全て削減した場合**: 8,859 → 5,629文字（**36.5%削減**）
  - 推定トークン数: 2,215 → 1,407 tokens（808 tokens削減）

---

## 推奨改善策

### 優先度A（即座実施）

1. **「画像から読み取る」の繰り返しを3回以内に**
   - 冒頭で強調 → OK
   - ステップ1冒頭で再確認 → OK
   - 最終チェックリスト → 削除

2. **正誤例を半減**
   - 発行者: 正2例、誤2例で十分
   - 総合計: 正1例、誤2例で十分

3. **最終チェックリストを削除**
   - 全て既出の内容

### 優先度B（要検証）

4. **JSON出力形式を大幅簡略化**
   - 全5項目の例示 → 2項目のみ例示
   - 残りは「...同様の形式で他の項目も記載」と省略

5. **yourReading記録フォーマットの統合**
   - 出力形式セクションに統合し、重複削除

### 優先度C（慎重に検討）

6. **セクションタイトルの装飾削減**
   - ━━━の装飾線は視認性向上に寄与するが、トークン消費
   - 簡潔な # Markdown形式に変更も検討

---

## まとめ

現在のプロンプトは **8,859文字（約2,215 tokens）** で、主な問題は：

1. **「画像から読み取る」の6回繰り返し**（約500文字）
2. **JSON出力形式の完全例示**（2,156文字、24.3%）
3. **正誤例の過剰提示**（発行者1,482文字、総合計1,029文字）

**推奨削減量**: 最低1,280文字（14.5%）、理想的には3,230文字（36.5%）

削減後も検証精度を維持しながら、トークンコストを削減できます。
